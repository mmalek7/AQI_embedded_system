import json
import numpy as np
import matplotlib
from matplotlib import pyplot as plt
from statistics import mean
plt.gca().set_xscale('linear')
PM2_5_JSON= '{"channel":{"id":628559,"name":"AirMonitor_e9bb","latitude":"0.0","longitude":"0.0","field1":"PM1.0 (ATM)","field2":"PM2.5 (ATM)","field3":"PM10.0 (ATM)","field4":"Uptime","field5":"RSSI","field6":"Temperature","field7":"Humidity","field8":"PM2.5 (CF=1)","created_at":"2018-11-15T23:39:47Z","updated_at":"2019-03-20T17:03:58Z","last_entry_id":634549},"feeds":[{"created_at":"2022-08-03T18:06:41Z","entry_id":634450,"field2":"5.80"},{"created_at":"2022-08-03T18:08:41Z","entry_id":634451,"field2":"5.46"},{"created_at":"2022-08-03T18:10:40Z","entry_id":634452,"field2":"5.77"},{"created_at":"2022-08-03T18:12:40Z","entry_id":634453,"field2":"5.81"},{"created_at":"2022-08-03T18:14:41Z","entry_id":634454,"field2":"5.26"},{"created_at":"2022-08-03T18:16:41Z","entry_id":634455,"field2":"4.82"},{"created_at":"2022-08-03T18:18:41Z","entry_id":634456,"field2":"4.82"},{"created_at":"2022-08-03T18:20:41Z","entry_id":634457,"field2":"5.94"},{"created_at":"2022-08-03T18:22:41Z","entry_id":634458,"field2":"5.93"},{"created_at":"2022-08-03T18:24:41Z","entry_id":634459,"field2":"5.93"},{"created_at":"2022-08-03T18:26:41Z","entry_id":634460,"field2":"5.39"},{"created_at":"2022-08-03T18:28:41Z","entry_id":634461,"field2":"6.12"},{"created_at":"2022-08-03T18:30:41Z","entry_id":634462,"field2":"5.71"},{"created_at":"2022-08-03T18:32:41Z","entry_id":634463,"field2":"5.33"},{"created_at":"2022-08-03T18:34:41Z","entry_id":634464,"field2":"5.44"},{"created_at":"2022-08-03T18:36:41Z","entry_id":634465,"field2":"5.45"},{"created_at":"2022-08-03T18:38:41Z","entry_id":634466,"field2":"5.75"},{"created_at":"2022-08-03T18:40:41Z","entry_id":634467,"field2":"5.31"},{"created_at":"2022-08-03T18:42:41Z","entry_id":634468,"field2":"5.26"},{"created_at":"2022-08-03T18:44:41Z","entry_id":634469,"field2":"5.07"},{"created_at":"2022-08-03T18:46:41Z","entry_id":634470,"field2":"5.20"},{"created_at":"2022-08-03T18:48:41Z","entry_id":634471,"field2":"5.46"},{"created_at":"2022-08-03T18:50:41Z","entry_id":634472,"field2":"5.59"},{"created_at":"2022-08-03T18:52:41Z","entry_id":634473,"field2":"5.07"},{"created_at":"2022-08-03T18:54:41Z","entry_id":634474,"field2":"4.98"},{"created_at":"2022-08-03T18:56:41Z","entry_id":634475,"field2":"4.49"},{"created_at":"2022-08-03T18:58:43Z","entry_id":634476,"field2":"5.43"},{"created_at":"2022-08-03T19:00:41Z","entry_id":634477,"field2":"4.55"},{"created_at":"2022-08-03T19:02:41Z","entry_id":634478,"field2":"4.30"},{"created_at":"2022-08-03T19:04:41Z","entry_id":634479,"field2":"4.77"},{"created_at":"2022-08-03T19:06:41Z","entry_id":634480,"field2":"4.39"},{"created_at":"2022-08-03T19:08:41Z","entry_id":634481,"field2":"4.04"},{"created_at":"2022-08-03T19:10:43Z","entry_id":634482,"field2":"3.65"},{"created_at":"2022-08-03T19:12:41Z","entry_id":634483,"field2":"4.50"},{"created_at":"2022-08-03T19:14:41Z","entry_id":634484,"field2":"4.56"},{"created_at":"2022-08-03T19:16:41Z","entry_id":634485,"field2":"4.60"},{"created_at":"2022-08-03T19:18:41Z","entry_id":634486,"field2":"4.16"},{"created_at":"2022-08-03T19:20:41Z","entry_id":634487,"field2":"4.33"},{"created_at":"2022-08-03T19:22:41Z","entry_id":634488,"field2":"4.91"},{"created_at":"2022-08-03T19:24:41Z","entry_id":634489,"field2":"4.93"},{"created_at":"2022-08-03T19:26:41Z","entry_id":634490,"field2":"5.12"},{"created_at":"2022-08-03T19:28:41Z","entry_id":634491,"field2":"4.17"},{"created_at":"2022-08-03T19:30:41Z","entry_id":634492,"field2":"4.67"},{"created_at":"2022-08-03T19:32:41Z","entry_id":634493,"field2":"4.75"},{"created_at":"2022-08-03T19:34:41Z","entry_id":634494,"field2":"5.09"},{"created_at":"2022-08-03T19:36:41Z","entry_id":634495,"field2":"5.20"},{"created_at":"2022-08-03T19:38:41Z","entry_id":634496,"field2":"5.17"},{"created_at":"2022-08-03T19:40:41Z","entry_id":634497,"field2":"4.95"},{"created_at":"2022-08-03T19:42:43Z","entry_id":634498,"field2":"4.98"},{"created_at":"2022-08-03T19:44:41Z","entry_id":634499,"field2":"5.57"},{"created_at":"2022-08-03T19:46:41Z","entry_id":634500,"field2":"4.76"},{"created_at":"2022-08-03T19:48:41Z","entry_id":634501,"field2":"5.07"},{"created_at":"2022-08-03T19:50:41Z","entry_id":634502,"field2":"6.02"},{"created_at":"2022-08-03T19:52:41Z","entry_id":634503,"field2":"5.98"},{"created_at":"2022-08-03T19:54:41Z","entry_id":634504,"field2":"5.24"},{"created_at":"2022-08-03T19:56:41Z","entry_id":634505,"field2":"4.28"},{"created_at":"2022-08-03T19:58:41Z","entry_id":634506,"field2":"4.12"},{"created_at":"2022-08-03T20:00:41Z","entry_id":634507,"field2":"3.91"},{"created_at":"2022-08-03T20:02:41Z","entry_id":634508,"field2":"3.75"},{"created_at":"2022-08-03T20:04:41Z","entry_id":634509,"field2":"4.15"},{"created_at":"2022-08-03T20:06:41Z","entry_id":634510,"field2":"4.09"},{"created_at":"2022-08-03T20:08:41Z","entry_id":634511,"field2":"4.04"},{"created_at":"2022-08-03T20:10:41Z","entry_id":634512,"field2":"3.80"},{"created_at":"2022-08-03T20:12:41Z","entry_id":634513,"field2":"3.68"},{"created_at":"2022-08-03T20:14:41Z","entry_id":634514,"field2":"3.87"},{"created_at":"2022-08-03T20:16:41Z","entry_id":634515,"field2":"4.53"},{"created_at":"2022-08-03T20:18:41Z","entry_id":634516,"field2":"4.04"},{"created_at":"2022-08-03T20:20:41Z","entry_id":634517,"field2":"4.81"},{"created_at":"2022-08-03T20:22:41Z","entry_id":634518,"field2":"5.21"},{"created_at":"2022-08-03T20:24:41Z","entry_id":634519,"field2":"3.54"},{"created_at":"2022-08-03T20:26:41Z","entry_id":634520,"field2":"3.62"},{"created_at":"2022-08-03T20:28:43Z","entry_id":634521,"field2":"4.04"},{"created_at":"2022-08-03T20:30:41Z","entry_id":634522,"field2":"4.30"},{"created_at":"2022-08-03T20:32:41Z","entry_id":634523,"field2":"3.95"},{"created_at":"2022-08-03T20:34:41Z","entry_id":634524,"field2":"5.18"},{"created_at":"2022-08-03T20:36:41Z","entry_id":634525,"field2":"4.20"},{"created_at":"2022-08-03T20:38:41Z","entry_id":634526,"field2":"4.30"},{"created_at":"2022-08-03T20:40:41Z","entry_id":634527,"field2":"4.39"},{"created_at":"2022-08-03T20:42:41Z","entry_id":634528,"field2":"4.72"},{"created_at":"2022-08-03T20:44:41Z","entry_id":634529,"field2":"4.35"},{"created_at":"2022-08-03T20:46:41Z","entry_id":634530,"field2":"3.94"},{"created_at":"2022-08-03T20:48:41Z","entry_id":634531,"field2":"4.55"},{"created_at":"2022-08-03T20:50:41Z","entry_id":634532,"field2":"5.00"},{"created_at":"2022-08-03T20:52:41Z","entry_id":634533,"field2":"4.49"},{"created_at":"2022-08-03T20:54:41Z","entry_id":634534,"field2":"5.17"},{"created_at":"2022-08-03T20:56:41Z","entry_id":634535,"field2":"5.28"},{"created_at":"2022-08-03T20:58:41Z","entry_id":634536,"field2":"5.30"},{"created_at":"2022-08-03T21:00:41Z","entry_id":634537,"field2":"5.28"},{"created_at":"2022-08-03T21:02:41Z","entry_id":634538,"field2":"5.07"},{"created_at":"2022-08-03T21:04:41Z","entry_id":634539,"field2":"4.93"},{"created_at":"2022-08-03T21:06:41Z","entry_id":634540,"field2":"4.58"},{"created_at":"2022-08-03T21:08:41Z","entry_id":634541,"field2":"3.96"},{"created_at":"2022-08-03T21:10:41Z","entry_id":634542,"field2":"4.96"},{"created_at":"2022-08-03T21:12:41Z","entry_id":634543,"field2":"5.28"},{"created_at":"2022-08-03T21:14:41Z","entry_id":634544,"field2":"4.62"},{"created_at":"2022-08-03T21:16:41Z","entry_id":634545,"field2":"4.29"},{"created_at":"2022-08-03T21:18:41Z","entry_id":634546,"field2":"4.71"},{"created_at":"2022-08-03T21:20:41Z","entry_id":634547,"field2":"4.02"},{"created_at":"2022-08-03T21:22:41Z","entry_id":634548,"field2":"5.05"},{"created_at":"2022-08-03T21:24:41Z","entry_id":634549,"field2":"4.59"}]}'
PM2_5 = json.loads(PM2_5_JSON)

channels_2 = PM2_5['channel']
feeds_2 = PM2_5['feeds']
print ("PM2_5 Entries")

x2 = []
y2 = []
for i in PM2_5["feeds"]:
    y2= y2 + [float(i["field2"])]
    ih1 = 50
    il1 = 0
    chp1 = 12
    clp1 = 0
    cm1 = np.array(y2)
    AQI1=((((ih1-il1)/(chp1-clp1))*(cm1-clp1))+51)
    x2= x2 + [PM2_5["feeds"].index(i)]

print(x2)
print(y2)
print(AQI1)




